#!/bin/bash
# Rolling update script for the Django app

echo "ðŸš€ Applying updated deployment (v2.0)..."
kubectl apply -f blue_deployment.yaml

echo "ðŸ“¦ Checking rollout status..."
kubectl rollout status deployment/messaging-app-blue

echo"ðŸŒ Testing application for downtime..."
for i in {1..10}; do
  curl -s http://localhost:8000/ > /dev/null && echo "Request $i: App is up" || echo "Request $i: App might be down"
  sleep 2
done

echo "ðŸ§© Current running pods:"
kubectl get pods -l app=messaging-app

